{% extends 'base.html' %}
{% block titulo %} Iniciar Sesión {% endblock titulo %}

{% block body %}
<style>
  body{background:linear-gradient(160deg,#0e0e10,#161618 55%,#1c1c1f);}
  .auth-wrapper{min-height:95vh; display:flex; justify-content:center; align-items:center; padding:24px;}
  .auth-card{
    width:90%; max-width:1100px; border-radius:22px; overflow:hidden; background:#111;
    box-shadow:0 10px 28px -12px rgba(0,0,0,.6);
    display:flex; flex-wrap:wrap;
  }
  .auth-left,
  .auth-right{
    flex:1 1 50%;
    max-width:50%;
    min-width:0;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
  }
  .auth-left{
    background:linear-gradient(185deg,#000 0%,#c40000 70%);
    color:#fff; text-align:center; padding:38px 30px;
  }
  .auth-left img{max-width:40%; height:auto; object-fit:contain; margin-bottom:16px;}
  .auth-left h2{margin-bottom:8px; font-weight:700;}
  .auth-left p{font-family:Lucida Console, monospace; margin-bottom:16px; max-width:80%;}
  .auth-right{
    background:#1f1f21; color:#e6e6e6; padding:38px 30px;
  }
  .auth-right h2{margin-bottom:14px; color:#fff; font-weight:700;}
  .auth-right .alert{
    width:100%; max-width:400px; background:#232325; color:#e6e6e6; border-color:#3a3a3a;
  }
  .btn-google{
    background:#232325; color:#e6e6e6; border:1px solid #2d2d2d; height:45px;
  }
  .btn-google:hover{background:#27272a; color:#fff; border-color:#3a3a3a;}
  .auth-right .form-control{
    background:#232325; border:1px solid #2d2d2d; color:#e6e6e6; height:45px;
  }
  .auth-right .form-control::placeholder{color:#a9a9ad;}
  .auth-right .form-control:focus{
    background:#252527; color:#fff; border-color:#c40000; box-shadow:0 0 0 .15rem rgba(196,0,0,.3);
  }
  .btn-red{
    background:linear-gradient(90deg,#7a0000,#c40000); border:none; color:#fff; height:45px; font-weight:700;
    box-shadow:0 6px 16px -6px rgba(110,0,0,.55);
  }
  .btn-red:hover{background:linear-gradient(90deg,#c40000,#ff4d4d);}
  @media (max-width:768px){
    .auth-left, .auth-right{flex:1 1 100%; max-width:100%; padding:30px 22px;}
    .auth-left img{max-width:55%;}
  }
</style>

<!-- Toasts Bootstrap (arriba derecha) -->
<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index:1100;">
  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="toast align-items-center border-0 {% if category in ['success','warning','danger','info','primary','secondary','dark'] %}text-bg-{{ category }}{% else %}text-bg-dark{% endif %}"
           role="alert" aria-live="assertive" aria-atomic="true"
           data-bs-autohide="true" data-bs-delay="2500">
        <div class="d-flex">
          <div class="toast-body">
            {{ message }}
          </div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
        </div>
      </div>
    {% endfor %}
  {% endif %}
  {% endwith %}
</div>

<div class="auth-wrapper">
  <div class="auth-card">
    <!-- Izquierda -->
    <div class="auth-left">
      <img src="{{ url_for('static', filename='logo_gymrats.png') }}" alt="GymRats">
      <h2>¡BIENVENIDO NUEVAMENTE!</h2>
      <p>¿Nuevo aquí? Regístrate y comienza tu transformación fitness.</p>
      <a href="{{ url_for('registro') }}" class="btn btn-light text-dark fw-bold">Registrarse</a>
    </div>

    <!-- Derecha -->
    <div class="auth-right">
      <h2>Iniciar Sesión</h2>

      <!-- ...existing code... (se reemplazaron los alerts por toasts) -->

      <button type="button" class="btn btn-google w-100 d-flex align-items-center justify-content-center mb-3" style="max-width:400px;">
        <img src="{{ url_for('static', filename='google_gymrats.png') }}" alt="Google Logo" style="width:20px; margin-right:10px;">
        Iniciar con Google
      </button>

      <p class="mb-3" style="color:#b5b5b5;">o inicia sesión con tu cuenta</p>

      <form method="post" action="{{ url_for('accesologin') }}" style="width:100%; max-width:400px;">
        <div class="mb-3">
          <input type="email" class="form-control" name="email" placeholder="Correo electrónico" required>
        </div>
        <div class="mb-3">
          <input type="password" class="form-control" name="password" placeholder="Contraseña" required>
        </div>
        <button type="submit" class="btn btn-red fw-bold w-100">Iniciar Sesión</button>
      </form>
    </div>
  </div>
</div>

<script>
  // Mostrar automáticamente los toasts
  document.addEventListener('DOMContentLoaded', function () {
    if (!window.bootstrap) return;
    document.querySelectorAll('.toast').forEach(t => new bootstrap.Toast(t).show());
  });
</script>
{% endblock %}